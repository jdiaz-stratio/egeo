<!--

    © 2017 Stratio Big Data Inc., Sucursal en España.

    This software is licensed under the Apache License, Version 2.0.
    This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
    without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    See the terms of the License for more details.

    SPDX-License-Identifier: Apache-2.0.

-->
<st-docs [htmlFile]="configDoc.html" [tsFile]="configDoc.ts" [componentFile]="configDoc.component">
   <demo-css-property-table [cssProperties]="cssProperties"></demo-css-property-table>
   <section class="demo-layout">
      <h2 class="demo-layout__demo-label">Demo</h2>
      <div class="demo-layout__demo-container">
         <div class="demo-layout__demo-container__demo--disabled" style="height: 100%">
            <h2 class="subtitle">Selectable tables</h2>
            <div class="row">
               <div class="col-sm-12 col-lg-12 col-xs-12">
                  <st-dynamic-table [jsonSchema]="jsonSchema"
                                    [items]="users"
                                    [sortable]="false"
                                    [filterable]="false"
                                    [selectable]="true"
                                    [selectableAll]="true"
                                    [hasHoverMenu]="true"
                                    [activeHoverMenu]="activeHoverMenuPosition[0]"
                                    (selectAll)="onSelectAll($event, 0)"
                                    (selectRow)="onSelectRow($event, 0)"
                                    (showHoverMenu)="onShowHoverMenu($event, 0)"
                                    (updateFields)="onUpdateFields($event, 0)">
                     <st-dropdown-menu st-dynamic-table-hover-menu
                                       class="row-menu"
                                       [items]="rowActions"
                                       [active]="activeHoverMenuPosition[0] !== undefined"
                                       [visualMode]="1">
                     </st-dropdown-menu>
                  </st-dynamic-table>
               </div>
            </div>

            <h2 class="subtitle">Sortable table</h2>
            <p class="paragraph">Table can be configured as sortable or not. Moreover, it allows to configure only specific
               fields as sortable using <b>uiDefinition</b> input. In this example, we have marked "company" column as not
               sortable.</p>
            <st-dynamic-table [jsonSchema]="jsonSchema"
                              [items]="sortedUsers"
                              [sortable]="true"
                              [filterable]="false"
                              [currentOrder]="currentOrder"
                              [hasHoverMenu]="true"
                              [uiDefinitions]="{company: {sortable: false}}"
                              [activeHoverMenu]="activeHoverMenuPosition[1]"
                              (changeOrder)="onSortTable($event)"
                              (showHoverMenu)="onShowHoverMenu($event, 1)"
                              (updateFields)="onUpdateFields($event, 1)">
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[1] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>

            <h2 class="subtitle">Filterable table</h2>
            <p class="paragraph">Table can be configured as filterable or not. Moreover, it allows to configure only
               specific
               fields as filterable </p>
            <st-dynamic-table [jsonSchema]="jsonSchema"
                              [items]="filteredUsers"
                              [sortable]="false"
                              [filterable]="true"
                              [hasHoverMenu]="true"
                              [activeHoverMenu]="activeHoverMenuPosition[2]"
                              [activeFilterFields]="activeFilters[2]"
                              (showHoverMenu)="onShowHoverMenu($event, 2)"
                              (updateFields)="onUpdateFields($event, 2)"
                              (selectFilters)="onFilter($event, 2)">
               >
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[2] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>

            <h2 class="subtitle">Filterable table with custom template</h2>
            <p class="paragraph">Table can be configured as filterable or not. Moreover, it allows to configure only
               specific
               fields as filterable </p>

            <ng-template #filterContent>
               <div class="custom-filter-container">
                  <st-input [formControl]="customFilterFormControl"
                            (click)="$event.stopPropagation()">
                  </st-input>

                  <button class="button button-primary small st-table__popover-button"
                          (click)="onCustomStatusFilter(3)" popover-filter-submit>
                     <span>Apply</span>
                  </button>
               </div>
            </ng-template>
            <st-dynamic-table [jsonSchema]="jsonSchema"
                              [items]="customFilteredUsers"
                              [sortable]="false"
                              [filterable]="true"
                              [hasHoverMenu]="true"
                              [activeFilterFields]="activeFilters[3]"
                              [activeHoverMenu]="activeHoverMenuPosition[3]"
                              [templateContentFilter]="filterContent"
                              (showHoverMenu)="onShowHoverMenu($event, 3)"
                              (updateFields)="onUpdateFields($event, 3)"
                              (selectFilters)="onFilter($event, 3)">
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[3] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>

            <h2 class="subtitle">Table with fixed header</h2>
            <p class="paragraph">In order to fix the header, it is needed to set the input 'fixedHeader' to true and
               specify
               to st-table tag from outside <i><b>"display:flex; height: 'the desired height'</b></i>"</p>

            <st-dynamic-table class="fixed-header-table"
                              [jsonSchema]="jsonSchema"
                              [items]="users"
                              [hasHoverMenu]="true"
                              [fixedHeader]="true"
                              [filterable]="false"
                              [activeHoverMenu]="activeHoverMenuPosition[4]"
                              (showHoverMenu)="onShowHoverMenu($event, 4)">
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[4] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>


            <h2 class="subtitle">Table with fixed header and sticky hover menu</h2>

            <st-dynamic-table class="fixed-header-table"
                              style="max-width: 60%"
                              [jsonSchema]="jsonSchema"
                              [items]="users"
                              [hasHoverMenu]="true"
                              [fixedHeader]="true"
                              [stickyHoverMenu]="true"
                              [activeHoverMenu]="activeHoverMenuPosition[4]"
                              [templateContentFilter]="filterContent"
                              (showHoverMenu)="onShowHoverMenu($event, 4)">
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[4] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>


            <h2 class="subtitle">Table without header</h2>
            <st-dynamic-table
               [jsonSchema]="jsonSchema"
               [items]="users"
               [hasHoverMenu]="true"
               [header]="false"
               [activeHoverMenu]="activeHoverMenuPosition[5]"
               [templateContentFilter]="filterContent"
               (showHoverMenu)="onShowHoverMenu($event, 5)">
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[5] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>

            <h2 class="subtitle">Table with custom class 'separated rows'</h2>
            <st-dynamic-table
               [jsonSchema]="jsonSchema"
               [items]="users"
               [hasHoverMenu]="true"
               [filterable]="false"
               [header]="true"
               [sortable]="false"
               customClasses="separated-rows"
               [activeHoverMenu]="activeHoverMenuPosition[4]"
               (showHoverMenu)="onShowHoverMenu($event, 4)">
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[4] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>

            <h2 class="subtitle">Table with custom css definitions</h2>
            <st-dynamic-table
               [jsonSchema]="jsonSchema"
               [uiDefinitions]="uiDefinition"
               [currentOrder]="currentOrder"
               [items]="sortedUsers"
               [hasHoverMenu]="true"
               [header]="true"
               [activeHoverMenu]="activeHoverMenuPosition[4]"
               [templateContentFilter]="filterContent"
               (showHoverMenu)="onShowHoverMenu($event, 4)"
               (changeOrder)="onSortTable($event)">
               <st-dropdown-menu st-dynamic-table-hover-menu
                                 class="row-menu"
                                 [items]="rowActions"
                                 [active]="activeHoverMenuPosition[4] !== undefined"
                                 [visualMode]="1">
               </st-dropdown-menu>
            </st-dynamic-table>

            <h2 class="subtitle">Tables with Fks and groups</h2>
            <div class="row">
               <div class="col-sm-12 col-lg-12 col-xs-12">
                  <st-dynamic-table [jsonSchema]="jsonSchemaFk"
                                    [items]="fks"
                                    [sortable]="false"
                                    [filterable]="true"
                                    [selectable]="true"
                                    [selectableAll]="true"
                                    [hasHoverMenu]="true"
                                    [uiDefinitions]="uiDefinition"
                                    [activeHoverMenu]="activeHoverMenuPosition[0]"
                                    (selectAll)="onSelectAll($event, 0)" (selectRow)="onSelectRow($event, 0)"
                                    (showHoverMenu)="onShowHoverMenu($event, 0)">
                     <st-dropdown-menu st-dynamic-table-hover-menu class="row-menu" [items]="rowActions"
                                       [active]="activeHoverMenuPosition[0] !== undefined" [visualMode]="1">
                     </st-dropdown-menu>
                  </st-dynamic-table>
               </div>
            </div>
         </div>
         <div class="demo-layout__demo-container__demo-config"></div>
      </div>
   </section>
</st-docs>
